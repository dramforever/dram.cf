<!DOCTYPE html>
<html>
  <head>
    <title>减数分裂和配子结合模拟 -- by dramforever</title>
    <link rel="stylesheet" href="meiosis.css" />
    <meta charset="utf-8" />
  </head>
  <script>
    window.onhashchange = function() {
        //location.reload();
    }
    var sa1, sa2, sb1, sb2, ta1, ta2, tb1, tb2;
    var X1 = 1, X2 = 1;
    var eimsa1, eimsa2, eimta1, eimta2, enext, estys;
    var ixft;
    function u() {
        eimsa1.className = X1 == 1 ? "imt act" : "imt";
        eimsa2.className = X1 == 2 ? "imt act" : "imt";
        eimta1.className = X2 == 1 ? "imt act" : "imt";
        eimta2.className = X2 == 2 ? "imt act" : "imt";
    }
    
    function clickNext() {
        var h = location.hash;
    	if(ixft)
    	    location.hash = "#" + (sa1?"A":"a") + (sa2?"A":"a")
    	                        + (sb1?"B":"b") + (sb2?"B":"b")
    	                        + ","
    	                        + (ta1?"A":"a") + (ta2?"A":"a")
    	                        + (tb1?"B":"b") + (tb2?"B":"b")
    	                        + X1 + X2 + "$";
    	                        
    	else location.assign("merge.html#" + (((h[10] == "1"?sa1:sa2)?"A":"a")
    	                                   + ((X1 == 1?ta1:ta2)?"A":"a")).split("").sort().join("")
    	                                   + (((h[11]=="1"?sb1:sb2)?"B":"b")
    	                                   + ((X2==1?tb1:tb2)?"B":"b")).split("").sort().join(""));
    	X1=X2=1;
    	window.onload();
    }
    
    window.onload = function() {
        var h = location.hash;
        sa1 = h[1] == "A"; sa2 = h[2] == "A";
        sb1 = h[3] == "B"; sb2 = h[4] == "B";
        
        ta1 = h[6] == "A"; ta2 = h[7] == "A";
        tb1 = h[8] == "B"; tb2 = h[9] == "B";
        function G(x) { return document.getElementById(x); }
        ixft = location.hash.indexOf("$") == -1;
        eimsa1 = G("imsa1");
        eimsa2 = G("imsa2");
        eimta1 = G("imta1");
        eimta2 = G("imta2");
        enext = G("next");
        estys = G("stys");
        
        estys.innerHTML = ixft ? "父本" : "母本";
        enext.onclick = enext.ontouchstart = clickNext;
        eimsa1.src = "im/A" + (ixft?sa1:ta1) + ".png";
        eimsa2.src = "im/A" + (ixft?sa2:ta2) + ".png";
        
        eimta1.src = "im/B" + (ixft?sb1:tb1) + ".png";
        eimta2.src = "im/B" + (ixft?sb2:tb2) + ".png";
        
        u();
    }
    
  </script>
  <body>
    <div class="bigGreen"><span id="stys">父本</span>联会</div>
      <div>
	<img class="imt" id="imsa1" src="im/Atrue.png"  onclick="X1=1; u();" ontouchstart = "X1=1; u();" />
	<img class="imt" id="imsa2" src="im/Afalse.png" onclick="X1=2; u();" ontouchstart = "X1=2; u();" />
      </div>
      
      <div>
	<img class="imt" id="imta1" src="im/Btrue.png"  onclick="X2=1; u();" ontouchstart = "X2=1; u();" />
	<img class="imt" id="imta2" src="im/Bfalse.png" onclick="X2=2; u();" ontouchstart = "X2=2; u();" />
      </div>
      
    <a class="bigGreen" id="next">下一步 &gt;</a>
  </body>
</html>
