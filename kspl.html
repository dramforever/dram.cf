<html>
    <head>
        <title>kspl: The combinatory macro language</title>
    </head>

    <body>
        <h1>kspl: The combinatory macro language</h1>
        Why don't I write this post in kspl?

        <pre><code>\#{
Now we can also build the B,C,K,W system.
We already have K built in, so here are the rest.
}
\#{B x y z = x (y z)} \Define\B{\S{\K\S}\K}
\#{C x y z = x z y}   \Define\C{\S{\S{\K\S}{\S{\K\K}\S}}{\K\K}}
\#{W x y = x y y}     \Define\W{\S\S{\S\K}}

\#{Great, let's see what we can do with them}

\#{
Actually, the C combinator wraps argument 3 between arg 1 and arg 2.
Therefore we can define this:
}
\Define\par{\C{&lt;p&gt;}{&lt;/p&gt;}}

\par{And now we can write paragraphs!}

#{
The expansion is as the following

  \par{And now we can write paragraphs!}
= \C{&lt;p&gt;}{&lt;/p&gt;}{And now we can write paragraphs!}

  (We will take \C for granted here. You can verify it if you want to.)

= {&lt;p&gt;}{And now we can write paragraphs!}{&lt;/p&gt;}
= &lt;p&gt;And now we can write paragraphs!&lt;/p&gt;

}

\#{
It turns out that we have a pattern here: we wrap some text in some tag.
So we can generalize this: write a \tag such that:

    \tag{t}{x} = &lt;t&gt;x&lt;/t&gt;

Here are my steps to create it.
Verification is left as an exercise to the reader
}


\#{
tag = \x. \y. &lt;x&gt;y&lt;/x&gt;
= \x. S (&lt;x&gt;) (K (&lt;/x&gt;))
= S (\x. S (&lt;x&gt;)) (\x. K (&lt;/x&gt;))
= S (S (K S) (C &lt; &gt;)) (S (K K) (C &lt;/ &gt;))
}
\Define\tag{\S{\S{\K\S}{\C{&lt;}{&gt;}}}{\S{\K\K}{\C{&lt;/}{&gt;}}}}
</code><pre>

    <h2>Further readings</h2>
    <ul>
        <li>The source code of the program:</li> 
        <a href="https://github.com/dramforever/kspl">https://github.com/dramforever/kspl</a>
        <li>The wikipedia page on combinatory calculi:</li>
        <a href="http://en.wikipedia.org/wiki/Combinatory_logic#Combinatory_calculi">http://en.wikipedia.org/wiki/Combinatory_logic#Combinatory_calculi</a>

    </body>
</html>
